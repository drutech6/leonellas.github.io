<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leonella's Vacation Home</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- Light Theme Color Palette & General Styles --- */
        :root {
            --primary-color: #007BFF;
            --secondary-color: #0056b3;
            --text-color: #333;
            --heading-color: #004085;
            --bg-light: #FFFFFF;
            --bg-alt: #F8F9FA;
            --border-color: #DEE2E6;
            --hover-light: #E9ECEF;
            
            /* Calendar-specific colors */
            --available-color: #28a745; /* Green for available dates */
            --unavailable-color: #DC3545; /* Red for unavailable dates */
            --selected-color: #007BFF;
            --range-color: #D4E7FF;
            --today-color: #17a2b8; /* A nice teal for 'today' */
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-alt);
            color: var(--text-color);
            line-height: 1.7;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        h1, h2, h3 {
            color: var(--heading-color);
            font-weight: 600;
        }

        h2 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 50px;
        }

        section {
            padding: 50px 0 400px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 40px; /* Extra margin to prevent overlap */    
    }

        section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
        }

        /* --- Buttons & Links --- */
        .btn {
            display: inline-block;
            margin-top: 15px;
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 15px;
            font-weight: bold;
            transition: background-color 0.3s, transform 0.2s;
            border: none;
        }

        /* --- Removes top padding above calendar only --- */
            #book-now {
               padding-top: 0;
               margin-top: 0;
            }
            #book-now {
               padding-top: 0;
            }
        .btn:hover {
            background-color: #E8B87A;
            transform: translateY(-2px);
        }

        /* --- Navigation Bar --- */
        .navbar {
            background-color: var(--bg-light);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .nav-links {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        .nav-links li {
            margin-left: 28px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: bold;
            transition: color 0.3s;
            padding: 8px 12px;
            border-radius: 15px;
        }

.nav-links a:hover,
        .nav-links a.active {
            color: var(--primary-color);
            background-color: rgba(26, 156, 63, 0.2);
        }

        .menu-toggle {
            display: none;
            font-size: 24px;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--heading-color);
        }
        /* --- About Styling --- */
        #about {
            padding-top: 0px;  /* reduce this */
            margin-top: 0;      /* ensure no extra margin */
        }
        /* --- Amenities Styling --- */
        #amenities {
            padding-top: 0px;  /* reduce this */
            margin-top: 0;      /* ensure no extra margin */
        }

        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            list-style: none;
            padding: 0;
        }

         .amenities-grid li {
            background: #CCE1E8;
            backdrop-filter: blur(6px);
            padding: 28px 20px;
            border-radius: 12px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: transform 0.3s ease;
        }

        .amenities-grid li:hover {
            transform: translateY(-5px);
        }

        /* --- CALENDAR STYLES --- */
        .calendar-wrapper {
            background-color: var(--bg-light);
            border-radius: 10px;
            padding: 2px;
            box-shadow: 0 6px 2px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }
        
        .calendar-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .calendar-section {
            flex: .3;
            min-width: 300px;
        }
        
        .section-title {
            font-size: 1.4rem;
            margin-bottom: 5px;
            color: var(--heading-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .calendar {
            background: var(--bg-alt);
            border-radius: 10px;
            padding: 1px;   /* reduce space above and below */
            border: 1px solid var(--border-color);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1px;
            padding-bottom: 1px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .month-year {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-color);
        }
        
        .nav-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: var(--secondary-color);
            transform: scale(1.1);
        }
        
        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .day {
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            position: relative;
            border: 1px solid transparent;
            /* MODIFIED: Available dates are now bold green */
            color: var(--available-color);
            font-weight: bold;
        }
        
        .day:not(.empty):not(.unavailable):hover {
            background: var(--hover-light);
            border-color: var(--primary-color);
        }
        
        .day.empty {
            visibility: hidden;
            cursor: default;
        }
        
        .day.selected {
            background: var(--selected-color);
            color: white;
            font-weight: bold;
        }
        
        /* MODIFIED: Unavailable dates are now red */
        .day.unavailable {
            background-color: #EDD5D5;
            color: red;
            cursor: not-allowed;
            text-decoration: none;
            font-weight: normal; /* Make them less prominent */
        }
        
        .day.today {
            background: var(--today-color);
            color: white;
            font-weight: bold;
        }
        
        /* Fix today's date hover color */
           .calendar .today:hover {
           background-color: white !important; /* keep the hover background */
           color: black !important;            /* flip the text color */
        }
        
        /* For selected check-in/check-out dates on hover */
        .calendar .selected:hover {
           background-color: white !important; /* keep the hover effect */
           color: black !important;            /* flip text to black */
        }

        .day.range {
            background: var(--range-color);
            color: var(--heading-color);
            border-radius: 0;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: center; /* centers the request to book button in the rates calculation results box */
            margin-top: 0px;
            padding: 0 10px;
            gap: 2px;
        }
        
        .calendar-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        .btn-book {
            background: var(--available-color); /* Green to match available dates */
            color: white;
        }
        
        .btn-book:hover {
            background: #218838;
        }
        
        .btn-clear {
            background: #6c757d;
            color: white;
        }
        
        .btn-clear:hover {
            background: #5a6268;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 1px;
            flex-wrap: wrap;
            padding: 1px;
            background: var(--bg-alt);
            border-radius: 8px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .legend-available {
            width: 18px;
            height: 18px;
            border: 1px solid var(--available-color);
        }
        
        .legend-selected { background: var(--selected-color); }
        .legend-range { background: var(--range-color); }
        .legend-unavailable { background: var(--unavailable-color); }
        .legend-today { background: var(--today-color); }
        
        .status-bar {
            background: var(--bg-alt);
            padding: 1px 0px;
            border-radius: 8px;
            width: 71%;
            margin-top: 1px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        
        .date-display {
            font-weight: 600;
        }
        
        .date-display span {
            color: var(--primary-color);
            margin: 0 5px;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                text-align: center;
                position: absolute;
                top: 70px;
                left: 0;
                background-color: var(--bg-light);
            }
            .nav-links.active { display: flex; }
            .nav-links li { margin: 15px 0; }
            .menu-toggle { display: block; }
            .calendar-container { flex-direction: column; }
            .controls { flex-direction: column; }
        }
        /* --- Gallery Styling --- */
        #gallery {
            padding-top: 0px;  /* reduce this */
            margin-top: 0;      /* ensure no extra margin */
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 30px;
        }

        .gallery-item {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: scale(1.03);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        /* --- Image Modal Styling --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .modal-content {
            max-width: 90%;
            max-height: 85vh;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease-in-out;
        }

        .modal-content img {
            width: 100%;
            height: auto;
            max-height: 80vh;
            object-fit: contain;
            border-radius: 8px;
        }

        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            font-size: 30px;
            padding: 15px;
            cursor: pointer;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            transition: background 0.3s;
        }

        .modal-nav:hover {
            background-color: var(--primary-color);
        }

        #prevBtn {
            left: 20px;
        }

        #nextBtn {
            right: 20px;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #aaa;
            cursor: pointer;
            background: none;
            border: none;
        }

        .close-modal:hover {
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- House Rules Styling --- */
        #amenities {
            padding-top: 0px;  /* reduce this */
            margin-top: 0;      /* ensure no extra margin */
        }
        #house-rules {
            padding-top: 0px;  /* reduce this */
            margin-top: 0;      /* ensure no extra margin */
        }

        .rules-list {
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.8;
            font-size: 1.05em;
        }

        .rules-list li {
            margin-bottom: 12px;
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                width: 100%;
                text-align: center;
                position: absolute;
                top: 70px;
                left: 0;
                background-color: var(--bg-deepest);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                padding: 15px 0;
            }

            .nav-links.active {
                display: flex;
            }

            .nav-links li {
                margin: 15px 0;
            }

            .menu-toggle {
                display: block;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .submit-btn {
                grid-column: 1;
            }

            .container {
                padding: 40px 20px;
            }

            section {
                padding: 50px 0 100px;
            }

            .modal-nav {
                padding: 12px;
                width: 40px;
                height: 40px;
                font-size: 24px;
            }

            #prevBtn {
                left: 10px;
            }

            #nextBtn {
                right: 10px;
            }

            .close-modal {
                right: 20px;
                font-size: 30px;
            }
.rates-container {
  display: flex;
  flex-direction: column;
  align-items: center;   /* centers everything horizontally */
  justify-content: center;
  text-align: center;    /* centers text */
  padding: 20px;
}

.rates-container button {
  margin-top: 15px;
  align-self: left;    /* keeps button centered */
}

#rate {
  background: #f8f9fa; /* light professional background */
  padding: 40px 20px;
}

#rate h2 {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 20px;
}

#rate h3 {
  margin-top: 20px;
  color: #333;
}

#rate ul {
  list-style: none;
  padding: 0;
  margin: 0 0 15px 0;
}

#rate ul li {
  margin-bottom: 8px;
  padding-left: 1em;
  position: relative;
}

#rate ul li::before {
  content: "•";
  position: absolute;
  left: 0;
  color: #666;
}

        }
#rate {
  text-align: center; /* makes the section centered */
}

#rate-container {
  max-width: 600px;   /* keeps text in a readable column */
  margin: 0 auto;     /* centers the block */
  text-align: left; /* centers all JSON-loaded content */
}

#rate-container ul {
  list-style: .;   /* remove bullet points */
  padding: 10;
  margin: 10px 0;
}

#rate-container li {
  margin: 5px 0;
}

    </style>
</head>
<body>
    <nav class="navbar">
        <a href="#home" class="nav-logo">Leonella's Vacation Home</a>
        <ul class="nav-links" id="navLinks">
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#amenities">Amenities</a></li>
            <li><a href="#rate">Rates & Policies</a></li>
            <li><a href="#book-now">Book Now</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        <button class="menu-toggle" id="menuToggle">☰</button>
    </nav>

    <main>
        <section id="home">
            <div class="container">
                <h2>Welcome to Leonella's Vacation Home</h2>
                <p>Your perfect escape in a beautiful, quiet residential area. Enjoy comfort, privacy, and convenience just minutes from essential amenities and major routes.</p>
                <a href="#about" class="btn">Learn More</a>
                <a href="#book-now" class="btn" style="margin-left: 15px;">Check Availability</a>

            </div>
        </section>
        <section id="about">
            <div class="container">
                <h2>About The Property</h2>
                <p>Leonella's Vacation Home is situated on Campo Street Extension, San Juan, Trinidad. The quiet neighborhood ensures restful nights while still being minutes away from the lively Croisee, where you’ll find groceries, bakeries, stores, banks, and public transport. Major routes to Piarco International Airport, Downtown Port of Spain, and Maracas Beach are all within easy reach.</p>
                <p>This charming 2-bedroom residential home is ideal for couples, families, or small groups seeking a peaceful retreat with modern comforts and easy city access.</p>
                <div style="text-align: center; margin-top: 30px;">
                    <a href="#house-rules" class="btn" style="margin: 0 10px;">View Our Home Rules</a>
                    <a href="#gallery" class="btn" style="margin: 0 10px;">View Gallery</a>
                    <a href="#book-now" class="btn" style="margin: 0 10px;">Check Availability</a>
                </div>
            </div>
        </section>

        <section id="amenities">
            <div class="container">
                <h2>Our Amenities</h2>
                <ul class="amenities-grid">
                    <li>✔️ Comfortable bedrooms (rent 1 or 2)</li>
                    <li>✔️ Fresh linens & towels</li>
                    <li>✔️ Fully Equipped Kitchen</li>
                    <li>✔️ High-Speed Wi-Fi</li>
                    <li>✔️ Smart TV with Streaming</li>
                    <li>✔️ Secure gated premises</li>
                    <li>✔️ Private Backyard</li>
                    <li>✔️ Free On-site Parking</li>
                    <li>✔️ Washer & Dryer</li>
                    <li>✔️ Air Conditioning & Hot Water</li>
                </ul>
            </div>
        </section>
        <section id="house-rules">
            <div class="container">
                <h2>House Rules</h2>
                <ul class="rules-list">
                    <li>Smoking is NOT ALLOWED inside. Guests may smoke outside.</li>
                    <li>Present your ID, Passport or Temporary Residence Card upon check-in.</li>
                    <li>Inform us the night before departure of your intended check-out time.</li>
                    <li>All waste must be placed in the provided garbage cans outside. Collection is daily early morning, Monday-Friday.</li>
                    <li>Switch off all electrical appliances before leaving the house.</li>
                    <li>Conserve water; supply automatically switches to the water tank during shortages.</li>
                    <li>Guests are responsible for any loss or damage caused by themselves or their companions.</li>
                    <li>Park vehicles only in the designated area.</li>
                    <li>Maximum occupancy is 4 persons. Extra charge of $25 USD per additional person.</li>
                    <li>Pets are not allowed inside or on the grounds.</li>
                    <li>Keep noise to a minimum to respect our neighbors.</li>
                    <li>Maintain a clean and sanitary environment.</li>
                    <li>Secure the gates when entering or leaving the premises.</li>
                </ul>
                <p style="text-align: center; margin-top: 30px;">These rules are written to ensure that your time here is safe and trouble free. We wish you a pleasant and enjoyable vacation! You are always welcome!</p>
            </div>
        </section>
        <section id="gallery">
            <div class="container">
                <h2>Gallery</h2>
                <p>Take a visual tour of our cozy and thoughtfully decorated vacation home.</p>
                <div class="gallery-grid">
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/293.jpg">
                        <img src="https://drutech6.github.io/Images/293.jpg" alt="Kitchen">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/723.jpg">
                        <img src="https://drutech6.github.io/Images/723.jpg" alt="Bedroom">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/11.jpg">
                        <img src="https://drutech6.github.io/Images/11.jpg" alt="Backyard">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/12.jpg">
                        <img src="https://drutech6.github.io/Images/12.jpg" alt="Exterior">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/13.jpg">
                        <img src="https://drutech6.github.io/Images/13.jpg" alt="Bathroom">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/14.jpg">
                        <img src="https://drutech6.github.io/Images/14.jpg" alt="Living Room">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/001.jpg">
                        <img src="https://drutech6.github.io/Images/001.jpg" alt="Kitchen">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/004.jpg">
                        <img src="https://drutech6.github.io/Images/004.jpg" alt="Bedroom">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/005.jpg">
                        <img src="https://drutech6.github.io/Images/005.jpg" alt="Backyard">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/301.jpg">
                        <img src="https://drutech6.github.io/Images/301.jpg" alt="Exterior">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/710.jpg">
                        <img src="https://drutech6.github.io/Images/710.jpg" alt="Bathroom">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/711.jpg">
                        <img src="https://drutech6.github.io/Images/711.jpg" alt="Living Room">
                    </div>
                    <div class="gallery-item" data-img="https://drutech6.github.io/Images/722.jpg">
                        <img src="https://drutech6.github.io/Images/722.jpg" alt="Living Room">
                    </div>
                </div>
            </div>
        </section>

<section id="rate" class="section">
  <h2>Rates & Policies</h2>
  <div id="rate-container">
    <!-- JSON content will load here -->
  </div>
</section>

        <section id="book-now">
            <div class="container">

                <div class="calendar-wrapper">
                    <div class="calendar-container">
                        <div class="calendar-section">
                            <h3 class="section-title"><i class="fas fa-sign-in-alt"></i> Check-in Date</h3>
                            <div class="calendar" id="checkin-calendar">
                                <div class="calendar-header">
                                    <button class="nav-btn" id="prev-checkin"><i class="fas fa-chevron-left"></i></button>
                                    <div class="month-year" id="checkin-month-year"></div>
                                    <button class="nav-btn" id="next-checkin"><i class="fas fa-chevron-right"></i></button>
                                </div>
                                <div class="weekdays">
                                    <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                                </div>
                                <div class="days-grid" id="checkin-days"></div>
                            </div>
                        </div>
                        
                        <div class="calendar-section">
                            <h3 class="section-title"><i class="fas fa-sign-out-alt"></i> Check-out Date</h3>
                            <div class="calendar" id="checkout-calendar">
                                <div class="calendar-header">
                                    <button class="nav-btn" id="prev-checkout"><i class="fas fa-chevron-left"></i></button>
                                    <div class="month-year" id="checkout-month-year"></div>
                                    <button class="nav-btn" id="next-checkout"><i class="fas fa-chevron-right"></i></button>
                                </div>
                                <div class="weekdays">
                                    <div>Su</div><div>Mo</div><div>Tu</div><div>We</div><div>Th</div><div>Fr</div><div>Sa</div>
                                </div>
                                <div class="days-grid" id="checkout-days"></div>
                            </div>
                        </div>    <!-- Right side = Rates box -->
    <div id="rates-container" style="flex:1; border:1px solid #ccc; border-radius:8px; padding:0px; max-width:300px;">
      <h3>Rates & Policies</h3>
      <div id="rates-info"></div>

      <div style="margin-top:0px;">
        <label for="guest-count"><strong>Guests:</strong></label>
        <input type="number" id="guest-count" value="1" min="1" max="10" style="width:60px; margin-left:10px;">
      </div>

      <div style="margin-top:0px;">
       <!--  <p><strong>Duration:</strong> --> <span id="trip-duration"></span><br>  
      <p><strong>Base Rate:</strong> $<span id="baseRate">0</span></p>
      <p><strong>Extra Guest Fee:</strong> $<span id="extraGuestFee">0</span></p>
      <p><strong>Cleaning Fee:</strong> $<span id="cleaningFee">0</span></p>
      <p><strong>Total:</strong> $<span id="total">0</span></p>
      </div>                    <div class="controls">
                        
                        <button class="calendar-btn btn-book" id="book-now-btn">
                            <i class="fas fa-check"></i> Request to Book
                        </button>
                    </div>
                    </div>
                    
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color legend-available"></div><span>Available</span></div>
                        <div class="legend-item"><div class="legend-color legend-selected"></div><span>Selected</span></div>
                        <div class="legend-item"><div class="legend-color legend-range"></div><span>Night(s)</span></div>
                        <div class="legend-item"><div class="legend-color legend-today"></div><span>Today</span></div>
                        <div class="legend-item"><div class="legend-color legend-unavailable"></div><span>Unavailable</span></div>
                    </div>

                    <div class="status-bar">
                        <div><b>Your Selection:</b></div>
                <span id="trip-duration"></span><br>   <!-- NEW LINE to count trip duration-->
  
                  <div class="date-display">  |  Check-in:<span id="checkin-date">Not selected</span>  |  Check-out:<span      id="checkout-date">Not selected</span></div>
                    </div>

                    <div class="controls">
                        <button class="calendar-btn btn-clear" id="clear-dates">
                            <i class="fas fa-times"></i> Clear
                        </button>

                    </div>
                </div>
            </div>
        </section>

        <section id="contact">
            <div class="container" style="text-align: center;">
                <h2>Contact Us</h2>
                <p>Have questions? Feel free to reach out anytime<br>Email: ghxaar93@yahoo.com | Phone: 347-377-7785 | 347-441-6399 | Cell: 868-361-3642</p>
                <a href="#book-now" class="btn" style="margin: 0 10px;">Check Availability</a>
            </div>
        </section>
    </main>

<!-- Image Modal Structure -->
    <div id="imageModal" class="modal">
        <button class="close-modal" id="closeModal">&times;</button>
        <button id="prevBtn" class="modal-nav">&#10094;</button>
        <div class="modal-content">
            <img id="modalImage" src="" alt="Full-size gallery image">
        </div>
        <button id="nextBtn" class="modal-nav">&#10095;</button>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- Mobile Menu Toggle ---
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
        
        // --- Calendar Logic ---
        let checkinDate = null;
        let checkoutDate = null;
        
        const today = new Date();
        today.setHours(0, 0, 0, 0); 
        let checkinCurrentDate = new Date();
        let checkoutCurrentDate = new Date();
        checkoutCurrentDate.setMonth(checkoutCurrentDate.getMonth() + 1);

        let unavailableDates = []; // initially empty

        // Fetch unavailable dates from availability.json
        fetch("availability.json")
              .then(response => response.json())
              .then(data => {
        if (data && Array.isArray(data.unavailable)) {
              unavailableDates = data.unavailable;
        }
        updateAllCalendars(); // build calendars after loading data
  })
        .catch(err => {
              console.error("Failed to load availability.json:", err);
        updateAllCalendars(); // fallback to empty
  });


        function toYYYYMMDD(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function generateCalendar(type, dateToShow) {
            const daysContainer = document.getElementById(`${type}-days`);
            const monthYearElement = document.getElementById(`${type}-month-year`);
            const month = dateToShow.getMonth();
            const year = dateToShow.getFullYear();

            monthYearElement.textContent = `${dateToShow.toLocaleString('default', { month: 'long' })} ${year}`;
            daysContainer.innerHTML = '';

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for (let i = 0; i < firstDay; i++) {
                daysContainer.insertAdjacentHTML('beforeend', '<div class="day empty"></div>');
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dateStr = toYYYYMMDD(date);
                const dayElement = document.createElement('div');
                dayElement.classList.add('day');
                dayElement.textContent = day;
                dayElement.dataset.date = dateStr;

                if (date < today || unavailableDates.includes(dateStr)) {
                    dayElement.classList.add('unavailable');
                } else {
                    const checkinStr = checkinDate ? toYYYYMMDD(checkinDate) : null;
                    const checkoutStr = checkoutDate ? toYYYYMMDD(checkoutDate) : null;

                    if (dateStr === checkinStr || dateStr === checkoutStr) {
                        dayElement.classList.add('selected');
                    } else if (checkinDate && checkoutDate && date > checkinDate && date < checkoutDate) {
                        dayElement.classList.add('range');
                    }
                    
                    if (toYYYYMMDD(date) === toYYYYMMDD(today) && !dayElement.classList.contains('selected')) {
                         dayElement.classList.add('today');
                    }
                }
                daysContainer.appendChild(dayElement);
            }
        }

        function updateAllCalendars() {
            generateCalendar('checkin', checkinCurrentDate);
            generateCalendar('checkout', checkoutCurrentDate);
        }

        function handleDateClick(e) {
            if (!e.target.matches('.day:not(.empty):not(.unavailable)')) return;
            
            const clickedDate = new Date(e.target.dataset.date + 'T12:00:00Z');

            if (!checkinDate || (checkinDate && checkoutDate)) {
                checkinDate = clickedDate;
                checkoutDate = null;
            } else if (clickedDate > checkinDate) {
                checkoutDate = clickedDate;
                
                let currentDate = new Date(checkinDate);
                currentDate.setDate(currentDate.getDate() + 1);
                while (currentDate < checkoutDate) {
                    if (unavailableDates.includes(toYYYYMMDD(currentDate))) {
                        alert("Your selected range includes booked dates. Please choose a different range.");
                        checkinDate = null;
                        checkoutDate = null;
                        break;
                    }
                    currentDate.setDate(currentDate.getDate() + 1);
                }
            } else {
                checkinDate = clickedDate;
                checkoutDate = null;
            }
            updateAllCalendars();
            updateStatusBar();
        }

function updateStatusBar() {
    const checkinDisplay = document.getElementById('checkin-date');
    const checkoutDisplay = document.getElementById('checkout-date');
    const durationDisplay = document.getElementById('trip-duration'); // NEW
    const options = { month: 'short', day: 'numeric', year: 'numeric' };

    checkinDisplay.textContent = checkinDate ? checkinDate.toLocaleDateString('en-US', options) : 'Not selected';
    checkoutDisplay.textContent = checkoutDate ? checkoutDate.toLocaleDateString('en-US', options) : 'Not selected';

    if (checkinDate && checkoutDate) {
        const diffTime = checkoutDate - checkinDate;
        const nights = diffTime / (1000 * 60 * 60 * 24);
        durationDisplay.textContent = `Duration: ${nights} Night${nights > 1 ? 's' : ''}`;
    } else {
        durationDisplay.textContent = '';
    }
}

        
        // --- Event Listeners Setup ---
        document.getElementById('checkin-days').addEventListener('click', handleDateClick);
        document.getElementById('checkout-days').addEventListener('click', handleDateClick);

        document.getElementById('prev-checkin').addEventListener('click', () => {
            checkinCurrentDate.setMonth(checkinCurrentDate.getMonth() - 1);
            generateCalendar('checkin', checkinCurrentDate);
        });
        document.getElementById('next-checkin').addEventListener('click', () => {
            checkinCurrentDate.setMonth(checkinCurrentDate.getMonth() + 1);
            generateCalendar('checkin', checkinCurrentDate);
        });

        document.getElementById('prev-checkout').addEventListener('click', () => {
            checkoutCurrentDate.setMonth(checkoutCurrentDate.getMonth() - 1);
            generateCalendar('checkout', checkoutCurrentDate);
        });
        document.getElementById('next-checkout').addEventListener('click', () => {
            checkoutCurrentDate.setMonth(checkoutCurrentDate.getMonth() + 1);
            generateCalendar('checkout', checkoutCurrentDate);
        });

document.getElementById('clear-dates').addEventListener('click', () => {
  checkinDate = null;
  checkoutDate = null;
  updateAllCalendars();
  updateStatusBar();
  if (typeof updateCost === 'function') {   // NEW
    updateCost();                           // NEW → zero totals
  }                                         // NEW
});


        // MODIFIED: This now opens the Google Form
        document.getElementById('book-now-btn').addEventListener('click', () => {
            if (checkinDate && checkoutDate) {
                // Format dates to YYYY-MM-DD string
                const checkin = toYYYYMMDD(checkinDate);
                const checkout = toYYYYMMDD(checkoutDate);

                // Construct the Google Form URL
                const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/Jv_Rant8J0A/viewform?usp=pp_url";
                const url = `${GOOGLE_FORM_URL}&entry.12=${encodeURIComponent(checkin)}&entry.7=${encodeURIComponent(checkout)}`;

                // Open the pre-filled form in a new tab
                window.open(url, '_blank');
            } else {
                alert('Please select both a check-in and check-out date.');
            }
        });

+ updateAllCalendars();        // draw once right away
        // --- Initial Render ---
        
    });
        // --- Image Gallery Modal Functionality ---
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const closeModal = document.getElementById('closeModal');
        const galleryItems = document.querySelectorAll('.gallery-item');

        let currentIndex = 0;
        const imageArray = Array.from(galleryItems).map(item => ({
            src: item.getAttribute('data-img'),
            alt: item.querySelector('img').alt
        }));

        galleryItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                currentIndex = index;
                modalImg.src = imageArray[currentIndex].src;
                modalImg.alt = imageArray[currentIndex].alt;
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            });
        });

        const hideModal = () => {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        };

        closeModal.addEventListener('click', hideModal);

        prevBtn.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + imageArray.length) % imageArray.length;
            modalImg.src = imageArray[currentIndex].src;
            modalImg.alt = imageArray[currentIndex].alt;
        });

        nextBtn.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % imageArray.length;
            modalImg.src = imageArray[currentIndex].src;
            modalImg.alt = imageArray[currentIndex].alt;
        });

        document.addEventListener('keydown', (e) => {
            if (modal.style.display === 'flex') {
                if (e.key === 'Escape') hideModal();
                else if (e.key === 'ArrowLeft') prevBtn.click();
                else if (e.key === 'ArrowRight') nextBtn.click();
            }
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) hideModal();
        });
    
    </script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  /* ---------- Mobile Menu ---------- */
  const menuToggle = document.getElementById('menuToggle');
  const navLinks   = document.getElementById('navLinks');
  if (menuToggle && navLinks) {
    menuToggle.addEventListener('click', () => navLinks.classList.toggle('active'));
  }

  /* ---------- State ---------- */
  let checkinDate = null;
  let checkoutDate = null;

  const today = new Date();
  today.setHours(0,0,0,0);

  let checkinCurrentDate  = new Date();
  let checkoutCurrentDate = new Date();
  checkoutCurrentDate.setMonth(checkoutCurrentDate.getMonth() + 1);

  let unavailableDates = [];
  let rates = null;

  const MIN_NIGHTS = 4;
  const MAX_NIGHTS = 13;

  /* ---------- Helpers ---------- */
  const $ = (id) => document.getElementById(id);
  const setText = (id, value) => { const el = $(id); if (el) el.textContent = value; };
  const toYYYYMMDD = (date) => {
    const y = date.getFullYear();
    const m = String(date.getMonth()+1).padStart(2,'0');
    const d = String(date.getDate()).padStart(2,'0');
    return `${y}-${m}-${d}`;
  };

  /* ---------- Load availability ---------- */
  fetch("availability.json")
    .then(r => r.json())
    .then(data => {
      if (data && Array.isArray(data.unavailable)) {
        unavailableDates = data.unavailable;
      }
      updateAllCalendars();
    })
    .catch(err => {
      console.error("Failed to load availability.json:", err);
      updateAllCalendars();
    });

  /* ---------- Load rates.json ---------- */
  fetch("https://raw.githubusercontent.com/drutech6/drutech6.github.io/refs/heads/main/rates.json")
    .then(res => {
      if (!res.ok) throw new Error('rates.json fetch failed');
      return res.json();
    })
    .then(data => {
      rates = data.rentalRates;

      const rc = $('rate-container');
      if (rc) {
        rc.innerHTML = `
          <h3>Rental Rates</h3>
          <ul>
            <li><strong>Base Rate:</strong> $${rates.baseRate} per night (up to ${rates.baseGuests} guests)</li>
            <li><strong>Extra Guest Fee:</strong> $${rates.extraGuestFee} per extra guest per night</li>
            <li><strong>Cleaning Fee:</strong> $${rates.cleaningFee} per stay</li>
          </ul>

          <h3>Payment Policy</h3>
          <ul>
            <li><strong>Deposit:</strong> ${data.paymentPolicy.deposit}</li>
            <li><strong>Balance:</strong> ${data.paymentPolicy.balance}</li>
            <li><strong>Accepted Payments:</strong> ${data.paymentPolicy.acceptedPayments}</li>
          </ul>

          <h3>Cancellation Policy</h3>
          <ul>${data.cancellationPolicy.map(item => `<li>${item}</li>`).join('')}</ul>
        `;
      }

      setText('baseRate', rates.baseRate);
      setText('cleaningFee', rates.cleaningFee);
      updateCost();
    })
    .catch(err => {
      console.error("Failed to load rates.json:", err);
    });

  /* ---------- Calendar rendering ---------- */
function generateCalendar(type, dateToShow) {
    const daysContainer = document.getElementById(`${type}-days`);
    const monthYearElement = document.getElementById(`${type}-month-year`);
    const month = dateToShow.getMonth();
    const year = dateToShow.getFullYear();

    monthYearElement.textContent = `${dateToShow.toLocaleString('default', { month: 'long' })} ${year}`;
    daysContainer.innerHTML = '';

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    // Compute valid checkout window if a check-in exists
    let minCheckout = null;
    let maxCheckout = null;
    if (checkinDate) {
        minCheckout = new Date(checkinDate);
        minCheckout.setDate(minCheckout.getDate() + 4);

        maxCheckout = new Date(checkinDate);
        maxCheckout.setDate(maxCheckout.getDate() + 13);
    }

    for (let i = 0; i < firstDay; i++) {
        daysContainer.insertAdjacentHTML('beforeend', '<div class="day empty"></div>');
    }

    for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        const dateStr = toYYYYMMDD(date);
        const dayElement = document.createElement('div');
        dayElement.classList.add('day');
        dayElement.textContent = day;
        dayElement.dataset.date = dateStr;

        if (date < today || unavailableDates.includes(dateStr)) {
            dayElement.classList.add('unavailable');
        } else {
            const checkinStr = checkinDate ? toYYYYMMDD(checkinDate) : null;
            const checkoutStr = checkoutDate ? toYYYYMMDD(checkoutDate) : null;

            // ✅ Gray-out logic
            if (type === "checkout" && checkinDate) {
                if (date <= checkinDate || date < minCheckout || date > maxCheckout) {
                    dayElement.classList.add("unavailable");
                }
            }
            if (type === "checkin" && checkinDate) {
                if (date > checkinDate && (date < minCheckout || date > maxCheckout)) {
                    dayElement.classList.add("unavailable");
                }
            }

            if (dateStr === checkinStr || dateStr === checkoutStr) {
                dayElement.classList.add('selected');
            } else if (checkinDate && checkoutDate && date > checkinDate && date < checkoutDate) {
                dayElement.classList.add('range');
            }

            if (toYYYYMMDD(date) === toYYYYMMDD(today) && !dayElement.classList.contains('selected')) {
                dayElement.classList.add('today');
            }
        }
        daysContainer.appendChild(dayElement);
    }
}

  function updateAllCalendars() {
    generateCalendar('checkin',  checkinCurrentDate);
    generateCalendar('checkout', checkoutCurrentDate);
  }

  /* ---------- Date selection ---------- */
function handleDateClick(e) {
    if (!e.target.matches('.day:not(.empty):not(.unavailable)')) return;
            
    const clickedDate = new Date(e.target.dataset.date + 'T12:00:00Z');

    if (!checkinDate || (checkinDate && checkoutDate)) {
        checkinDate = clickedDate;
        checkoutDate = null;

        // 👇 NEW: enforce 3–7 day rule right after selecting check-in
        onCheckinSelected(checkinDate);
    if (typeof updateCost === 'function') {   // NEW
      updateCost();                           // NEW → reset totals (nights = 0)
    }                                         // NEW
    } else if (clickedDate > checkinDate) {
        checkoutDate = clickedDate;
                
        let currentDate = new Date(checkinDate);
        currentDate.setDate(currentDate.getDate() + 1);
        while (currentDate < checkoutDate) {
            if (unavailableDates.includes(toYYYYMMDD(currentDate))) {
                alert("Your selected range includes booked dates. Please choose a different range.");
                checkinDate = null;
                checkoutDate = null;
                break;
            }
            currentDate.setDate(currentDate.getDate() + 1);
        }
    if (typeof updateCost === 'function') {   // NEW
      updateCost();                           // NEW → compute totals now that nights > 0
    }                                         // NEW
    } else {
        checkinDate = clickedDate;
        checkoutDate = null;

        // 👇 NEW: also enforce when user resets check-in
        onCheckinSelected(checkinDate);
    if (typeof updateCost === 'function') {   // NEW
      updateCost();                           // NEW
    }                                         // NEW
    }

    updateAllCalendars();
    updateStatusBar();

}

  $('checkin-days').addEventListener('click', handleDateClick);
  $('checkout-days').addEventListener('click', handleDateClick);

  $('prev-checkin').addEventListener('click', () => {
    checkinCurrentDate.setMonth(checkinCurrentDate.getMonth() - 1);
    generateCalendar('checkin', checkinCurrentDate);
  });
  $('next-checkin').addEventListener('click', () => {
    checkinCurrentDate.setMonth(checkinCurrentDate.getMonth() + 1);
    generateCalendar('checkin', checkinCurrentDate);
  });

  $('prev-checkout').addEventListener('click', () => {
    checkoutCurrentDate.setMonth(checkoutCurrentDate.getMonth() - 1);
    generateCalendar('checkout', checkoutCurrentDate);
  });
  $('next-checkout').addEventListener('click', () => {
    checkoutCurrentDate.setMonth(checkoutCurrentDate.getMonth() + 1);
    generateCalendar('checkout', checkoutCurrentDate);
  });

  $('clear-dates').addEventListener('click', () => {
    checkinDate = null;
    checkoutDate = null;
    updateAllCalendars();
    updateStatusBar();
    updateCost();
  });
function onCheckinSelected(date) {
  const minCheckout = new Date(date);  minCheckout.setDate(minCheckout.getDate() + 4);
  const maxCheckout = new Date(date);  maxCheckout.setDate(maxCheckout.getDate() + 13);

  // Grey out invalid checkout dates
  document.querySelectorAll('#checkout-days .day').forEach(dayEl => {
    const dayDate = new Date(dayEl.dataset.date);
    const invalid = (dayDate <= date) || (dayDate < minCheckout) || (dayDate > maxCheckout);
    dayEl.classList.toggle("unavailable", invalid);
    dayEl.style.pointerEvents = invalid ? "none" : "auto";
    dayEl.style.opacity = invalid ? "0.4" : "1";
  });

  // Auto-jump checkout calendar to first valid month/day
  checkoutCurrentDate = new Date(minCheckout);
  generateCalendar('checkout', checkoutCurrentDate);

  // NEW: keep totals panel consistent
  if (typeof updateCost === 'function') {
    updateCost();
  }
}


  /* ---------- Status Bar ---------- */
  function updateStatusBar() {
    const checkinDisplay  = $('checkin-date');
    const checkoutDisplay = $('checkout-date');
    const options = { month: 'short', day: 'numeric', year: 'numeric' };

    checkinDisplay.textContent  = checkinDate  ? checkinDate.toLocaleDateString('en-US', options)  : 'Not selected';
    checkoutDisplay.textContent = checkoutDate ? checkoutDate.toLocaleDateString('en-US', options) : 'Not selected';

    const nights = calcNights(checkinDate, checkoutDate);
    document.querySelectorAll('#trip-duration').forEach(el => {
      el.textContent = (nights > 0) ? `Duration: ${nights} Night${nights > 1 ? 's' : ''}` : '';
    });
  }

  function calcNights(inDate, outDate) {
    if (!inDate || !outDate) return 0;
    const ms = outDate - inDate;
    return ms > 0 ? (ms / (1000 * 60 * 60 * 24)) : 0;
  }

  /* ---------- Cost Calculator ---------- */
  function updateCost() {
    if (!rates) return;

    const guestsInput = $('guest-count');
    const guests = Math.max(1, parseInt(guestsInput && guestsInput.value, 10) || 1);
    const nights = calcNights(checkinDate, checkoutDate);

    const baseRate    = Number(rates.baseRate)    || 0;
    const baseGuests  = Number(rates.baseGuests)  || 0;
    const xGuestFee   = Number(rates.extraGuestFee) || 0;
    const cleaningFee = Number(rates.cleaningFee) || 0;

    const extraGuestsCount = Math.max(0, guests - baseGuests);
    const extraGuestFeePerDay = extraGuestsCount * xGuestFee;

    setText('baseRate', baseRate.toFixed(0));
    setText('extraGuestFee', extraGuestFeePerDay.toFixed(0));
    setText('cleaningFee', cleaningFee.toFixed(0));

    const total = nights > 0 ? (baseRate + extraGuestFeePerDay) * nights + cleaningFee : 0;
    setText('total', total.toFixed(0));
  }

  const guestInput = $('guest-count');
  if (guestInput) {
    guestInput.addEventListener('input', updateCost);
    guestInput.addEventListener('change', updateCost);
  }

  /* ---------- Book Now ---------- */
  $('book-now-btn').addEventListener('click', () => {
    const nights = calcNights(checkinDate, checkoutDate);
    if (!checkinDate || !checkoutDate) {
      alert('Please select both a check-in and check-out date.');
      return;

    }
    if (nights < MIN_NIGHTS || nights > MAX_NIGHTS) {
      alert(`Booking must be between ${MIN_NIGHTS} and ${MAX_NIGHTS} nights.`);
      return;
    }

    const checkin  = toYYYYMMDD(checkinDate);
    const checkout = toYYYYMMDD(checkoutDate);
    const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/1FA_url";
    const url = `${GOOGLE_FORM_URL}&entry.12=${encodeURIComponent(checkin)}&entry.7=${encodeURIComponent(checkout)}`;
    window.open(url, '_blank');
  });

  /* ---------- Initial render ---------- */
  updateAllCalendars();
  updateStatusBar();
  updateCost();
});
</script>


</body>
</html>

